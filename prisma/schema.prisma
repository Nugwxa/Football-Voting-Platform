generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Session {
  id         String   @id @default(uuid())
  userId     String
  user       User     @relation(fields: [userId], references: [id])
  startDate  DateTime
  expiryDate DateTime
}

model User {
  id               String             @id @default(uuid())
  name             String
  email            String             @unique
  isAdmin          Boolean            @default(false)
  isActive         Boolean            @default(true)
  auth             Json
  VoteRegigtration VoteRegigtration[]
  Session          Session[]
  registrationDate DateTime
  ResetToken       ResetToken[]
}

enum PlayerPositions {
  Goalkeeper
  Defender
  Midfielder
  Forward
}

model Player {
  id          String          @id @default(uuid())
  key         String          @unique
  img         Json?
  firstName   String
  lastName    String
  squadNumber Int
  position    PlayerPositions
  isActive    Boolean
}

model ResetToken {
  id         String   @id @default(uuid())
  userId     String
  isUsed     Boolean  @default(false)
  created    DateTime @default(now())
  expiryDate DateTime
  user       User     @relation(fields: [userId], references: [id])
}

model Vote {
  id               String             @id @default(uuid())
  title            String
  candidates       Json               @default("{\"data\": []}")
  startDate        DateTime
  expiryDate       DateTime
  VoteRegigtration VoteRegigtration[]
  isEnabled        Boolean            @default(true)
}

model VoteRegigtration {
  id                String @id @default(uuid())
  voteId            String
  vote              Vote   @relation(fields: [voteId], references: [id])
  voterId           String
  selectedCandidate String
  user              User   @relation(fields: [voterId], references: [id])
}
